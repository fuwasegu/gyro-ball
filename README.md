# Gyro Ball

ジャイロセンサーを使ってボールを転がし、画面を塗りつぶすWebアプリケーションです。

## 機能

- デバイスの傾きに応じてボールが転がります
- ボールの軌跡が黒く塗られていきます
- 塗られた面積のパーセンテージがリアルタイムで表示されます
- ボールのサイズを3段階（小・中・大）で変更可能
  - サイズに応じて塗れる範囲も変化
  - 小：繊細な塗り込みが可能
  - 大：一気に広範囲を塗れる
- リセットボタンで軌跡を消去可能
- 摩擦による減速効果があり、自然な動きを実現
- 画面の端までボールを移動可能
- レスポンシブデザインで様々な画面サイズに対応
  - スマートフォンの画面サイズに最適化
  - 縦画面でも横画面でも快適に操作可能
- iOSデバイスでのジャイロセンサー権限管理に対応
- 固定ヘッダーでタイトルを常時表示

## 遊び方

1. スマートフォンやタブレットでアクセス
2. iOSの場合、ジャイロセンサーへのアクセスを許可
3. 画面上部のボタンでボールのサイズを選択
4. デバイスを傾けてボールを操作
5. ボールの軌跡で画面を塗りつぶす
6. 必要に応じてリセットボタンで軌跡を消去
7. 100%塗りつぶすことを目指す

## 技術スタック

- TypeScript
- SvelteKit
- HTML5 Canvas
- DeviceOrientation API

## ファイル構造

```
src/
├── routes/
│   └── +page.svelte      # メインページコンポーネント
├── components/
│   ├── Ball.svelte       # ボールの描画コンポーネント
│   ├── Canvas.svelte     # キャンバス操作コンポーネント
│   ├── Controls.svelte   # UI制御コンポーネント
│   └── Header.svelte     # ヘッダーコンポーネント
├── lib/
│   ├── physics.ts        # 物理演算関連の関数
│   └── gyroscope.ts      # ジャイロセンサー関連の関数
└── types/
    └── index.ts          # 型定義
```

### コンポーネント設計

#### Header.svelte

- アプリケーションのタイトルを表示
- 画面上部に固定表示（fixed position）
- レスポンシブ対応（画面サイズに応じて高さとフォントサイズを調整）
- シャドウ効果による視覚的な階層表現

#### Ball.svelte

- ボールの視覚的な表示を担当
- 位置とサイズに応じて動的にスタイルを適用
- CSSアニメーションによる滑らかな遷移効果

#### Canvas.svelte

- キャンバスの初期化と描画処理を管理
- ボールの軌跡を描画
- 塗られた面積の計算と通知
- キャンバスのリサイズ対応

#### Controls.svelte

- ユーザーインターフェースの提供
- ボールサイズの切り替え機能
- リセットボタンの提供
- 塗られた面積の表示

### ユーティリティモジュール

#### physics.ts

- ボールの物理演算を担当
- 速度と位置の計算
- 摩擦係数の適用
- 画面端での衝突判定

#### gyroscope.ts

- ジャイロセンサーへのアクセス管理
- iOS向けの権限リクエスト処理
- センサーデータの型定義

### 型定義（types/index.ts）

- `BallSize`: ボールサイズの列挙型
- `Position`: x, y座標を持つインターフェース
- `Velocity`: x, y方向の速度を持つインターフェース
- `BallSizeConfig`: ボールの半径と線幅の設定
- `DeviceOrientationEventStatic`: ジャイロセンサーイベントの型定義

## 開発環境のセットアップ

1. リポジトリのクローン

```bash
git clone https://github.com/your-username/gyro-ball.git
cd gyro-ball
```

2. 依存関係のインストール

```bash
pnpm install
```

3. 開発サーバーの起動

```bash
pnpm dev
```

4. ブラウザでアクセス

```text
http://localhost:5173
```

## 注意事項

- デバイスのジャイロセンサーが必要です
- HTTPSでの実行が推奨されます（一部ブラウザではHTTPSが必須）
- PCでは動作確認できません（ジャイロセンサーが必要なため）
